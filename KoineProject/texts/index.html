<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koine Greek Study Tool</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --blue: #3b82f6; --grey: #94a3b8; --vibrant-green: #22c55e;
            --gold: #eab308; --lavender: #a855f7;
        }
        body { font-family: 'Times New Roman', serif; background-color: #fcfaf7; padding: 2rem; color: #1e293b; }
        .container { max-width: 900px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 2rem; }
        .controls { 
            display: flex; justify-content: center; align-items: center; gap: 1.5rem; 
            margin-bottom: 2rem; background: white; padding: 1rem; border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        select, button { padding: 8px 16px; border-radius: 6px; border: 1px solid #cbd5e1; cursor: pointer; }
        button { background: #1e293b; color: white; border: none; font-weight: bold; }
        .reader-box {
            background: white; padding: 2.5rem; border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex;
            flex-wrap: wrap; gap: 12px; justify-content: center; min-height: 200px;
        }
        .word-wrapper { position: relative; display: inline-block; cursor: help; font-size: 1.8rem; padding: 2px 5px; border-radius: 4px; }
        
        /* Grammar Colors (Class names matching your JSON colorCode) */
        .color-on.blue { border-bottom: 4px solid var(--blue); }
        .color-on.grey { border-bottom: 4px solid var(--grey); }
        .color-on.vibrant-green { border-bottom: 4px solid var(--vibrant-green); }
        .color-on.gold { border-bottom: 4px solid var(--gold); }
        .color-on.lavender { border-bottom: 4px solid var(--lavender); }

        /* Tooltip */
        .tooltip {
            visibility: hidden; position: absolute; bottom: 130%; left: 50%;
            transform: translateX(-50%); background-color: #1e293b; color: #fff;
            padding: 12px; border-radius: 8px; width: 180px; z-index: 10;
            font-size: 0.95rem; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .word-wrapper:hover .tooltip { visibility: visible; }
        .gloss-text { color: #fbbf24; font-weight: bold; font-size: 1.1rem; display: block; margin-bottom: 4px; }
        .phonetic-text { font-style: italic; color: #94a3b8; font-size: 0.8rem; }
    </style>
</head>
<body>

<div id="app" class="container">
    <div class="header">
        <h1>Koine Greek Liturgical Reader</h1>
    </div>
    
    <div class="controls">
        <div>
            <label>Text: </label>
            <select v-model="selectedFile" @change="loadText">
                <option v-for="text in availableTexts" :key="text.file" :value="text.file">
                    {{ text.name }}
                </option>
            </select>
        </div>
        <button @click="showColors = !showColors">
            {{ showColors ? 'Hide' : 'Show' }} Colors
        </button>
    </div>

    <div class="reader-box">
        <span v-for="(item, index) in words" :key="index" 
              class="word-wrapper" 
              :class="[showColors ? item.colorCode.replace(' ', '-') : '']">
            {{ item.word }}
            
            <div class="tooltip">
                <span class="gloss-text">{{ item.gloss }}</span>
                <div style="border-top: 1px solid #475569; margin: 5px 0;"></div>
                <strong>Lemma:</strong> {{ item.lemma }}<br>
                <span class="phonetic-text">{{ item.phonetic }}</span><br>
                <small style="opacity: 0.8">{{ item.partOfSpeech }}</small>
            </div>
        </span>
    </div>
</div>

<script>
    const { createApp } = Vue;

    createApp({
        data() {
            return {
                showColors: false,
                selectedFile: 'lords_prayer.json', // Must match one of the files below
                words: [],
                /* MANUAL ACTION: 
                   List your files here. 'name' is what you see, 'file' is the filename.
                */
                availableTexts: [
                    { name: "Lord's Prayer", file: "lords_prayer.json" },
                    { name: "Psalm 23", file: "psalm_23.json" }
                ]
            }
        },
        methods: {
            async loadText() {
                try {
                    // This fetches from your /texts folder
                    const response = await fetch(`./texts/${this.selectedFile}`);
                    if (!response.ok) throw new Error("Could not find the file");
                    this.words = await response.json();
                } catch (err) {
                    console.error("Error:", err);
                }
            }
        },
        mounted() {
            this.loadText();
        }
    }).mount('#app');
</script>

</body>
</html>